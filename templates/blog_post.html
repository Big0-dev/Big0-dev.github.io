{% extends "base.html" %}

{% block title %}{{ current_blog.title }}{% endblock %}
{% block meta_description %}{{ current_blog.meta_description }}{% endblock %}
{% block canonical_path %}/blog/{{ current_blog.slug }}.html{% endblock %}

{% block custom_css %}
<link rel="stylesheet" href="{{ static }}/detail-pages.css">
{% endblock %}

{% block content %}
<!-- Blog Post Hero -->
<section class="page-hero">
  <div class="container">
    <!-- Breadcrumbs -->
    <nav class="breadcrumbs mb-lg">
      <a href="{{ home }}" class="breadcrumb-link">Home</a>
      <span class="breadcrumb-separator">/</span>
      <a href="{{ blog }}" class="breadcrumb-link">Blog</a>
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-current">{{ current_blog.title }}</span>
    </nav>
    
    <div class="hero-content text-center max-w-3xl mx-auto">
      <div class="flex items-center justify-center gap-md mb-md">
        <span class="badge">{{ current_blog.frontmatter.category | default('Technology') }}</span>
        <span class="text-sm text-tertiary">{{ current_blog.frontmatter.date | default('') }}</span>
      </div>
      <h1 class="text-4xl font-bold">{{ current_blog.title }}</h1>
    </div>
  </div>
</section>

<!-- Blog Post Content -->
<article class="section">
  <div class="container">
    <div class="max-w-3xl mx-auto">
      <!-- Main Content -->
      <!-- Article Meta -->
      <div class="detail-meta">
        <div class="meta-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
            <line x1="16" y1="2" x2="16" y2="6"/>
            <line x1="8" y1="2" x2="8" y2="6"/>
            <line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
          <span>{{ current_blog.frontmatter.date | default('') }}</span>
        </div>
        <div class="meta-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
          <span class="reading-time">Calculating...</span>
        </div>
        <div class="meta-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/>
            <line x1="7" y1="7" x2="7.01" y2="7"/>
          </svg>
          <span>{{ current_blog.frontmatter.category | default('Technology') }}</span>
        </div>
        <span class="reading-time">{{ current_blog.reading_time | default('5 min read') }}</span>
      </div>

      <!-- Main Content -->
      <div class="card p-2xl mb-2xl">
        <div class="detail-content">
          {{ current_blog.content_html | safe }}
        </div>
      </div>

      <!-- Author Box -->
      <div class="author-box">
        <img src="{{ static }}/team-ceo.avif" alt="Hassan Kamran" class="author-avatar" style="width: 80px; height: 80px; object-fit: cover;">
        <div class="author-info">
          <h4>Hassan Kamran</h4>
          <p class="author-title">Founder & CEO, Big0</p>
          <p class="author-bio">Leading innovation in AI and technology solutions. Passionate about transforming businesses through cutting-edge technology.</p>
          <div class="author-links mt-sm">
            <a href="https://www.linkedin.com/in/engr-hassan-kamran/" target="_blank" rel="noopener noreferrer" class="text-primary hover:text-primary-light mr-md">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="inline mr-xs">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
              LinkedIn
            </a>
            <a href="https://capt.pk" target="_blank" rel="noopener noreferrer" class="text-primary hover:text-primary-light">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="inline mr-xs">
                <circle cx="12" cy="12" r="10"/>
                <path d="M2 12h20"/>
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
              </svg>
              Website
            </a>
          </div>
        </div>
      </div>

      <!-- Tags -->
      {% if current_blog.tags %}
      <div class="detail-tags">
        <span class="text-sm text-tertiary mr-md">Tags:</span>
        {% for tag in current_blog.tags %}
        <a href="#" class="detail-tag">#{{ tag }}</a>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Navigation -->
      <div class="text-center">
        <a href="../blog.html" class="btn btn-secondary">
          <svg class="mr-sm" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5"/>
            <polyline points="12 19 5 12 12 5"/>
          </svg>
          Back to Insights
        </a>
      </div>
    </div>
  </div>
</article>

<!-- CTA Section -->
{% include 'cta.html' %}
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
// Calculate reading time
document.addEventListener('DOMContentLoaded', function() {
  const content = document.querySelector('.detail-content');
  const readingTimeElement = document.querySelector('.reading-time');
  
  if (content && readingTimeElement) {
    // Get text content and count words
    const text = content.textContent || content.innerText;
    const words = text.trim().split(/\s+/).length;
    
    // Calculate reading time (200 words per minute average)
    const wordsPerMinute = 200;
    const readingTime = Math.ceil(words / wordsPerMinute);
    
    // Update the display
    readingTimeElement.textContent = `${readingTime} min read`;
  }
});
</script>
{% endblock %}