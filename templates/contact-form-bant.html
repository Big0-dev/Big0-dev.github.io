<!-- Contact Form -->
<div class="contact-form-container">
  <form
    id="contactForm"
    class="contact-form"
    action="https://api.web3forms.com/submit"
    method="POST"
  >
    <input type="hidden" name="access_key" value="4995bef8-9b68-4453-ae2b-6618d35c4278" />
    <input type="checkbox" name="botcheck" style="display: none" />

    <!-- Row 1: Name + Email -->
    <div class="form-row">
      <div class="form-group">
        <label for="name" class="form-label">Full Name <span class="required">*</span></label>
        <input type="text" id="name" name="name" class="form-input" placeholder="Your name" required autocomplete="name" />
        <div class="form-error" id="name-error"></div>
      </div>
      <div class="form-group">
        <label for="email" class="form-label">Email <span class="required">*</span></label>
        <input type="email" id="email" name="email" class="form-input" placeholder="email@company.com" required autocomplete="email" />
        <div class="form-error" id="email-error"></div>
      </div>
    </div>

    <!-- Row 2: Phone + Company -->
    <div class="form-row">
      <div class="form-group">
        <label for="phone" class="form-label">Phone <span class="required">*</span></label>
        <input type="tel" id="phone" name="phone" class="form-input" placeholder="+1 (555) 123-4567" required autocomplete="tel" />
        <div class="form-error" id="phone-error"></div>
      </div>
      <div class="form-group">
        <label for="company" class="form-label">Company <span class="required">*</span></label>
        <input type="text" id="company" name="company" class="form-input" placeholder="Your Company Ltd." required autocomplete="organization" />
        <div class="form-error" id="company-error"></div>
      </div>
    </div>

    <!-- Row 3: Job Title + Company Size -->
    <div class="form-row">
      <div class="form-group">
        <label for="job_title" class="form-label">Job Title <span class="required">*</span></label>
        <input type="text" id="job_title" name="job_title" class="form-input" placeholder="CEO, CTO, PM, etc." required />
        <div class="form-error" id="job_title-error"></div>
      </div>
      <div class="form-group">
        <label for="company_size" class="form-label">Company Size <span class="required">*</span></label>
        <select id="company_size" name="company_size" class="form-input" required>
          <option value="">Select size</option>
          <option value="1-10">1-10 employees</option>
          <option value="11-50">11-50 employees</option>
          <option value="51-200">51-200 employees</option>
          <option value="201-1000">201-1,000 employees</option>
          <option value="1000+">1,000+ employees</option>
        </select>
        <div class="form-error" id="company_size-error"></div>
      </div>
    </div>

    <!-- Row 4: Service + Budget -->
    <div class="form-row">
      <div class="form-group">
        <label for="project_type" class="form-label">Service Needed <span class="required">*</span></label>
        <select id="project_type" name="project_type" class="form-input" required>
          <option value="">Select service</option>
          <option value="ai-ml-integration">AI & Machine Learning</option>
          <option value="hardware-engineering">Hardware & Engineering</option>
          <option value="custom-software-development">Custom Software Development</option>
          <option value="multiple-services">Multiple Services</option>
          <option value="not-sure">Not Sure</option>
        </select>
        <div class="form-error" id="project_type-error"></div>
      </div>
      <div class="form-group">
        <label for="budget_range" class="form-label">Budget Range <span class="required">*</span></label>
        <select id="budget_range" name="budget_range" class="form-input" required>
          <option value="">Select budget</option>
          <option value="10k-25k">$10k - $25k</option>
          <option value="25k-50k">$25k - $50k</option>
          <option value="50k-100k">$50k - $100k</option>
          <option value="100k-250k">$100k - $250k</option>
          <option value="250k+">$250k+</option>
          <option value="discuss">Prefer to discuss</option>
        </select>
        <div class="form-error" id="budget_range-error"></div>
      </div>
    </div>

    <!-- Row 5: Timeline (full width) -->
    <div class="form-group">
      <label for="timeline" class="form-label">Timeline <span class="required">*</span></label>
      <select id="timeline" name="timeline" class="form-input" required>
        <option value="">Select timeline</option>
        <option value="asap">ASAP (within 1 month)</option>
        <option value="1-3-months">1-3 months</option>
        <option value="3-6-months">3-6 months</option>
        <option value="6-12-months">6-12 months</option>
        <option value="12-months+">12+ months</option>
        <option value="flexible">Flexible</option>
      </select>
      <div class="form-error" id="timeline-error"></div>
    </div>

    <!-- Message -->
    <div class="form-group">
      <label for="message" class="form-label">Project Details <span class="required">*</span></label>
      <textarea id="message" name="message" class="form-input form-textarea" placeholder="What are you building? What problem are you solving?" rows="4" required></textarea>
      <div class="form-error" id="message-error"></div>
    </div>

    <!-- Submit -->
    <button type="submit" class="btn btn-primary btn-lg" id="submitBtn" style="width: 100%; margin-top: 8px;">
      <span class="button-content">Send Message &rarr;</span>
      <span class="button-loading" style="display: none;">Sending...</span>
    </button>

    <!-- Status -->
    <div class="form-message" id="formMessage" style="display: none;">
      <span id="messageText"></span>
    </div>
  </form>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("contactForm");
  const submitBtn = document.getElementById("submitBtn");
  const btnContent = submitBtn.querySelector(".button-content");
  const btnLoading = submitBtn.querySelector(".button-loading");
  const formMessage = document.getElementById("formMessage");
  const messageText = document.getElementById("messageText");

  function validateField(field) {
    const value = field.value.trim();
    const errorEl = document.getElementById(`${field.name}-error`);
    if (!errorEl) return true;
    let valid = true, msg = "";
    field.classList.remove("error");
    errorEl.style.display = "none";

    if (field.required && !value) {
      valid = false; msg = "Required.";
    } else if (field.name === "email" && value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
      valid = false; msg = "Enter a valid email.";
    } else if (field.name === "phone" && value && !/^[\+]?[1-9][\d\s\-\(\)]{8,}$/.test(value)) {
      valid = false; msg = "Enter a valid phone number.";
    } else if (field.name === "message" && value && value.length < 20) {
      valid = false; msg = "Minimum 20 characters.";
    }
    if (!valid) {
      field.classList.add("error");
      errorEl.textContent = msg;
      errorEl.style.display = "block";
    }
    return valid;
  }

  form.querySelectorAll(".form-input, .form-textarea").forEach(f => {
    f.addEventListener("blur", () => validateField(f));
    f.addEventListener("input", () => { if (f.classList.contains("error")) validateField(f); });
  });

  form.addEventListener("submit", async function (e) {
    e.preventDefault();
    formMessage.style.display = "none";
    let valid = true;
    form.querySelectorAll(".form-input, .form-textarea").forEach(f => { if (!validateField(f)) valid = false; });
    if (!valid) return;

    submitBtn.disabled = true;
    btnContent.style.display = "none";
    btnLoading.style.display = "inline";

    try {
      const fd = new FormData(form);
      const res = await fetch(form.action, { method: "POST", body: fd });
      const data = await res.json();
      if (data.success) {
        formMessage.className = "form-message success";
        messageText.textContent = "Message sent! We'll get back to you within 24 hours.";
        form.reset();
      } else {
        formMessage.className = "form-message error";
        messageText.textContent = data.message || "Error sending message. Please try again.";
      }
    } catch (err) {
      formMessage.className = "form-message error";
      messageText.textContent = "Error sending message. Email us at contact@big0.dev";
    } finally {
      submitBtn.disabled = false;
      btnContent.style.display = "inline";
      btnLoading.style.display = "none";
      formMessage.style.display = "block";
    }
  });
});
</script>
