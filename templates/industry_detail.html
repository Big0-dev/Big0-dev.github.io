{% extends "base.html" %}

{% block title %}{{ current_industry.title }}{% endblock %}
{% block meta_description %}{{ current_industry.meta_description }}{% endblock %}
{% block canonical_path %}/industries/{{ current_industry.slug }}.html{% endblock %}

{% block custom_css %}
<link rel="stylesheet" href="{{ static }}/detail-pages.css">
<link rel="stylesheet" href="{{ static }}/contact-form-bant.css" media="print" onload="this.media='all'">
<noscript><link rel="stylesheet" href="{{ static }}/contact-form-bant.css"></noscript>
{% endblock %}

{% block content %}
<!-- Industry Detail Hero -->
<section class="page-hero">
  <div class="container">
    <nav class="breadcrumbs mb-lg">
      <a href="{{ home }}" class="breadcrumb-link">Home</a>
      <span class="breadcrumb-separator">/</span>
      <a href="{{ industries }}" class="breadcrumb-link">Industries</a>
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-current">{{ current_industry.title }}</span>
    </nav>

    <div class="max-w-3xl">
      <h1 style="font-family: var(--font-display); font-size: clamp(28px, 4vw, 40px); font-weight: 700; color: var(--color-white); letter-spacing: -0.02em; line-height: 1.15; margin-bottom: 12px;">{{ current_industry.title }}</h1>
      {% if current_industry.solutions %}
      <div style="display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 16px;">
        {% for solution in current_industry.solutions[:4] %}
        <span class="badge badge-cyan">{{ solution }}</span>
        {% endfor %}
      </div>
      {% endif %}
      <div style="color: var(--color-mist); font-size: 13px; display: flex; align-items: center; gap: 4px;">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline-block; vertical-align: middle;">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        <span class="reading-time">Calculating...</span>
      </div>
    </div>
  </div>
</section>

<!-- Industry Content -->
<section class="section">
  <div class="container">
    <div class="max-w-4xl mx-auto">
      <div class="detail-content">
        {{ current_industry.content_html | safe }}
      </div>

      {% if current_industry.solutions %}
      <div class="key-features-section">
        <h3>Our Solutions</h3>
        <div class="features-grid">
          {% for solution in current_industry.solutions %}
          <div class="feature-item">
            <svg class="feature-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 11l3 3L22 4"/>
              <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/>
            </svg>
            <span>{{ solution }}</span>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <div class="text-center mt-3xl">
        <a href="../industries.html" class="btn btn-secondary">&larr; Back to Industries</a>
      </div>
    </div>
  </div>
</section>

<!-- Related Services -->
{% if current_industry.related_services %}
<section class="section section-alt">
  <div class="container">
    <div class="section-label">Related Services</div>
    <h2 class="section-title" style="margin-bottom: 32px;">How We Help {{ current_industry.title }}</h2>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; max-width: 900px; margin: 0 auto;">
      {% for service_slug in current_industry.related_services[:6] %}
        {% set service = services | selectattr("slug", "equalto", service_slug) | first %}
        {% if service %}
        <a href="../services/{{ service.slug }}.html" class="capability-card" style="text-decoration: none;">
          {% if service.icon %}
          <div class="capability-icon">
            {{ inject_svg(service.icon, True) | safe }}
          </div>
          {% endif %}
          <div class="capability-content">
            <h3>{{ service.title }}</h3>
            <p>{{ service.excerpt }}</p>
          </div>
        </a>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>
{% endif %}

<!-- Contact Form -->
<section class="section">
  <div class="container">
    <div class="max-w-4xl mx-auto">
      {% include 'contact-form-bant.html' %}
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
document.addEventListener('DOMContentLoaded', function() {
  var c = document.querySelector('.detail-content');
  var r = document.querySelector('.reading-time');
  if (c && r) {
    var w = (c.textContent || c.innerText).trim().split(/\s+/).length;
    r.textContent = Math.ceil(w / 200) + ' min read';
  }
  document.querySelectorAll('.faq-item').forEach(function(item) {
    item.querySelector('.faq-question').addEventListener('click', function() {
      var active = item.classList.contains('active');
      document.querySelectorAll('.faq-item').forEach(function(o) {
        if (o !== item) { o.classList.remove('active'); o.querySelector('.faq-question').setAttribute('aria-expanded','false'); }
      });
      item.classList.toggle('active', !active);
      this.setAttribute('aria-expanded', !active);
    });
  });
});
</script>
{% endblock %}
