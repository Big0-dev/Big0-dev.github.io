{% extends "base.html" %}

{% block title %}{{ current_product.title }}{% endblock %}
{% block meta_description %}{{ current_product.meta_description }}{% endblock %}
{% block canonical_path %}/products/{{ current_product.slug }}.html{% endblock %}

{% block custom_css %}
<link rel="stylesheet" href="{{ static }}/detail-pages.css">
<link rel="stylesheet" href="{{ static }}/contact-form-bant.css">
{% endblock %}

{% block content %}
<!-- Product Detail Hero -->
<section class="page-hero">
  <div class="container">
    <!-- Breadcrumbs -->
    <nav class="breadcrumbs mb-lg">
      <a href="{{ home }}" class="breadcrumb-link">Home</a>
      <span class="breadcrumb-separator">/</span>
      <a href="{{ products }}" class="breadcrumb-link">Products</a>
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-current">{{ current_product.title }}</span>
    </nav>

    <div class="hero-content text-center max-w-3xl mx-auto">
      {% if current_product.frontmatter.status %}
      <span class="product-status mb-md">{{ current_product.frontmatter.status }}</span>
      {% endif %}
      <h1 class="page-hero-title">{{ current_product.title }}</h1>
      <p style="color: var(--color-mist); margin-top: 16px; font-size: 16px; line-height: 1.7;">
        {{ current_product.frontmatter.tagline | default(current_product.description) }}
      </p>
    </div>
  </div>
</section>

<!-- Product Content -->
<section class="section">
  <div class="container">
    <div class="max-w-4xl mx-auto">
      <!-- Main Content -->
      <div class="detail-content">
        {{ current_product.content_html | safe }}
      </div>

      <!-- Navigation -->
      <div class="text-center mt-3xl">
        <a href="{{ products }}" class="btn btn-secondary">
          <svg class="mr-sm" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5"/>
            <polyline points="12 19 5 12 12 5"/>
          </svg>
          Back to Products
        </a>
      </div>
    </div>
  </div>
</section>

<!-- CTA Section -->
{% include 'cta.html' %}
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
// Calculate reading time
document.addEventListener('DOMContentLoaded', function() {
  const content = document.querySelector('.detail-content');
  const readingTimeElement = document.querySelector('.reading-time');

  if (content && readingTimeElement) {
    const text = content.textContent || content.innerText;
    const words = text.trim().split(/\s+/).length;
    const wordsPerMinute = 200;
    const readingTime = Math.ceil(words / wordsPerMinute);
    readingTimeElement.textContent = `${readingTime} min read`;
  }
});
</script>
{% endblock %}
