{% extends "base.html" %}

{% block title %}{{ current_service.title }}{% endblock %}
{% block meta_description %}{{ current_service.meta_description }}{% endblock %}
{% block canonical_path %}{% if current_service.frontmatter.canonical %}{{ current_service.frontmatter.canonical }}{% else %}/services/{{ current_service.slug }}.html{% endif %}{% endblock %}

{% block custom_css %}
<link rel="stylesheet" href="{{ static }}/detail-pages.css">
<link rel="stylesheet" href="{{ static }}/contact-form-bant.css">
{% endblock %}

{% block content %}
<!-- Service Detail Hero -->
<section class="page-hero">
  <div class="container">
    <!-- Breadcrumbs -->
    <nav class="breadcrumbs mb-lg">
      <a href="{{ home }}" class="breadcrumb-link">Home</a>
      <span class="breadcrumb-separator">/</span>
      <a href="{{ services_page }}" class="breadcrumb-link">Services</a>
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-current">{{ current_service.title }}</span>
    </nav>
    
    <div class="hero-content text-center max-w-3xl mx-auto">
      <h1 class="text-4xl font-bold">{{ current_service.title }}</h1>
      <p class="text-xl text-secondary mt-lg">
        {{ current_service.frontmatter.tagline | default('Transform your business with our expert solutions') }}
      </p>
      <div class="text-sm text-tertiary mt-md">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline-block; vertical-align: middle;">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        <span class="reading-time">Calculating...</span>
      </div>
    </div>
  </div>
</section>

<!-- Service Content -->
<section class="section">
  <div class="container">
    <div class="max-w-4xl mx-auto">
      <!-- Main Content -->
      <div class="detail-content">
        {{ current_service.content_html | safe }}
      </div>

      {% if current_service.features %}
      <!-- Key Features -->
      <div class="key-features-section">
        <h3 class="text-lg font-semibold mb-lg text-gradient">Key Features</h3>
        <div class="features-grid">
          {% for feature in current_service.features %}
          <div class="feature-item">
            <svg class="feature-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20 6 9 17 4 12"/>
            </svg>
            <span>{{ feature }}</span>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- Navigation -->
      <div class="text-center mt-3xl">
        <a href="{{ services_page }}" class="btn btn-secondary">
          <svg class="mr-sm" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5"/>
            <polyline points="12 19 5 12 12 5"/>
          </svg>
          Back to Services
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Contact Form Section -->
<section class="section bg-light">
  <div class="container">
    <div class="max-w-2xl mx-auto">
      {% include 'contact-form-bant.html' %}
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
// Calculate reading time
document.addEventListener('DOMContentLoaded', function() {
  const content = document.querySelector('.detail-content');
  const readingTimeElement = document.querySelector('.reading-time');
  
  if (content && readingTimeElement) {
    // Get text content and count words
    const text = content.textContent || content.innerText;
    const words = text.trim().split(/\s+/).length;
    
    // Calculate reading time (200 words per minute average)
    const wordsPerMinute = 200;
    const readingTime = Math.ceil(words / wordsPerMinute);
    
    // Update the display
    readingTimeElement.textContent = `${readingTime} min read`;
  }
});

// FAQ Accordion functionality
document.addEventListener('DOMContentLoaded', function() {
  const faqItems = document.querySelectorAll('.faq-item');
  
  faqItems.forEach(item => {
    const question = item.querySelector('.faq-question');
    
    question.addEventListener('click', function() {
      // Toggle current item
      const isActive = item.classList.contains('active');
      
      // Close all other items (optional - remove this block for multi-open)
      faqItems.forEach(otherItem => {
        if (otherItem !== item) {
          otherItem.classList.remove('active');
          otherItem.querySelector('.faq-question').setAttribute('aria-expanded', 'false');
        }
      });
      
      // Toggle current item
      if (isActive) {
        item.classList.remove('active');
        question.setAttribute('aria-expanded', 'false');
      } else {
        item.classList.add('active');
        question.setAttribute('aria-expanded', 'true');
      }
    });
  });
});
</script>
{% endblock %}